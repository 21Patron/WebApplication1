@model WebApplication1.Models.Application

@{
    ViewData["Title"] = "Review Application";
}

<div class="bg-gray-50 min-h-screen py-8">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-2xl font-bold text-gray-900">Review Application</h1>
            <p class="mt-1 text-sm text-gray-500">Review and decide on the application details below.</p>
        </div>

        <div class="bg-white shadow overflow-hidden sm:rounded-lg">
            <!-- Application Details -->
            <div class="px-6 py-5 border-b border-gray-200">
                <h2 class="text-lg font-medium text-gray-900">Application Details</h2>
            </div>
            <div class="px-6 py-5 space-y-6">
                <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Application Date</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.ApplicationDate.ToString("yyyy-MM-dd HH:mm:ss")</dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Status</dt>
                        <dd class="mt-1 text-sm">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                                @(Model.Status == WebApplication1.Models.Application.ApplicationStatus.Approved ? "bg-green-100 text-green-800" :
                                  Model.Status == WebApplication1.Models.Application.ApplicationStatus.Rejected ? "bg-red-100 text-red-800" :
                                  "bg-yellow-100 text-yellow-800")">
                                @Model.Status
                            </span>
                        </dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Reviewed Date</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.ReviewedDate?.ToString("yyyy-MM-dd HH:mm:ss") ?? "Not Reviewed"</dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Approved Date</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.ApprovedDate?.ToString("yyyy-MM-dd HH:mm:ss") ?? "Not Approved"</dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Rejected Date</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.RejectedDate?.ToString("yyyy-MM-dd HH:mm:ss") ?? "Not Rejected"</dd>
                    </div>
                </dl>
            </div>

            <!-- Applicant Information -->
            <div class="px-6 py-5 border-t border-gray-200">
                <h2 class="text-lg font-medium text-gray-900">Applicant Information</h2>
            </div>
            <div class="px-6 py-5 space-y-6">
                <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">First Name</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.FirstName</dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Last Name</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.LastName</dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Phone Number</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.PhoneNumber</dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Date of Birth</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.DateOfBirth.ToString("yyyy-MM-dd")</dd>
                    </div>
                    <div class="sm:col-span-2">
                        <dt class="text-sm font-medium text-gray-500">Address</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.Address</dd>
                    </div>
                </dl>
            </div>

            <!-- Course Information -->
            <div class="px-6 py-5 border-t border-gray-200">
                <h2 class="text-lg font-medium text-gray-900">Course Information</h2>
            </div>
            <div class="px-6 py-5 space-y-6">
                <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Course</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.Course?.CourseCode</dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Study Year</dt>
                        <dd class="mt-1 text-sm text-gray-900">@Model.StudyYear</dd>
                    </div>
                </dl>
            </div>

            <!-- Documents -->
            <div class="px-6 py-5 border-t border-gray-200">
                <h2 class="text-lg font-medium text-gray-900">Documents</h2>
            </div>
            <div class="px-6 py-5 space-y-6">
                <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">ID Document</dt>
                        <dd class="mt-1 text-sm text-indigo-600">
                            <a href="@Model.IdentificationDocumentPath" target="_blank">View Document</a>
                        </dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Academic Records</dt>
                        <dd class="mt-1 text-sm text-indigo-600">
                            <a href="@Model.AcademicRecordsPath" target="_blank">View Records</a>
                        </dd>
                    </div>
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Motivation Letter</dt>
                        <dd class="mt-1 text-sm text-indigo-600">
                            <a href="@Model.MotivationLetterPath" target="_blank">View Letter</a>
                        </dd>
                    </div>
                </dl>
            </div>

            <!-- Admin Actions -->
            <div class="px-6 py-5 border-t border-gray-200">
                <h2 class="text-lg font-medium text-gray-900">Admin Actions</h2>
            </div>
            <div class="px-6 py-5 space-y-6">
                <form asp-action="DecideApplication" method="post">
                    <input type="hidden" asp-for="ApplicationId" />
                    <div class="grid grid-cols-1 gap-y-4 sm:grid-cols-2">
                        <div>
                            <label for="AdminComments" class="block text-sm font-medium text-gray-700">Admin Comments</label>
                            <textarea id="AdminComments" name="AdminComments" class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md">@Model.AdminComments</textarea>
                        </div>
                        <div class="flex space-x-3">
                            <button type="submit" name="decision" value="approve" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700">
                                Approve
                            </button>
                            <button type="submit" name="decision" value="reject" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700">
                                Reject
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="mt-6">
            <a asp-action="Index" class="text-sm font-medium text-indigo-600 hover:text-indigo-500">
                ← Back to Applications
            </a>
        </div>
    </div>
</div>